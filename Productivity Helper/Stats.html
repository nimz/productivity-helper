<!DOCTYPE html>
<html>
<head>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script id="varDefs" src="Statistics.js"></script>
</head>
<body>

<h1>Productivity Statistics</h1>

<div>(as of <span id="time"></span>)</div>

<p>Time Wasted Today: </p>

<p>Total Time Wasted: </p>

</body>
<script type="text/javascript">
// found on http://stackoverflow.com/questions/4522213/can-someone-explain-this-javascript-real-time-clock-to-me
function checkTime(i) {
  return (i < 10) ? "0" + i : i;
}

function startTime() {
  var today = new Date(),
      h = checkTime(today.getHours()),
      m = checkTime(today.getMinutes()),
      s = checkTime(today.getSeconds());
  document.getElementById('time').innerHTML = h + ":" + m + ":" + s;
  t = setTimeout(function () {
      startTime()
  }, 250);
}
startTime();

var fulldata;
d3.text("Statistics.txt", function(d) {
  var lines = d.split("\n");
  var index = 0; // skip first line
  var firstSess = true;
  var sessions = [], curSessData = [];
  while (index++ < lines.length - 2) { // skip last line (newline)
    var line = lines[index];
    if (line.split(" ")[0] === "Session") {
      if (firstSess) {
        firstSess = false;
      }
      else {
        sessions.push(curSessData);
      }
      curSessData = [];
    }
    curSessData.push(line);
  }
  sessions.push(curSessData);
  fulldata = sessions;
  return d;
});
</script>
</html>
